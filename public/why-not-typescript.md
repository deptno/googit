---
title: 왜 아직도 메이저 라이브러리들은 자바스크립트 기반인가?(feat. 타입스크립트)
description: 제목엔 없지만 숨은 주연은 타입스크립트와, 타입스크립트의 생태계 그리고 테스트에 대한 글이다.
date: 2019-01-11
tags:
  - typescript
  - javascript
  - 타입스크립트
  - 자바스크립트
---

많은 라이브러리들이 자바스크립트로 작성되어있고 그들 나름의 안정성을 확보하고 있다.

타입스크립트는 강력한 타입 지원에 따른 안정성을 확보한다고 생각되기 쉽고 실제로 그런면이 적지 않지만, 내 생각에 타입스크립트는 **라이브러리 사용 관점에서** 타입 지원에 따른, 코드 어시스트에서 오는 생산성 확보가 더 큰 의미를 준다고 느낀다. 글을 읽으면서 참조가 가능하게 목록으로 다시 한번 적는다.

- 타입 지원에 따른 안정성 확보

- 코드 어시스트에서 오는 생산성 확보



## 왜 아직도 메이저 라이브러리들은 자바스크립트 기반인가?

2017년 1월부터 줄기차게 사용해온 `next.js` 도 자바스크립트 기반의 프레임웍이다.  크롤링 하면 피하기가 힘든 `jsdom` 이나 `cheerio` 등도 자바스크립트 기반이다. `react` 도 마찬가지다. `ramda`, `lodash` 와 같은 필수 아이템도 마찬가지다. 프론트엔드에서는 필수적으로 처리를 필요로 하는 시간 관련 라이브러리들 대부분도 자바스크립트 기반이다.

그런데 이들 모두 타입 데피니션 `@types/{라이브러리 이름}` 을 커뮤니티를 통해 지원하고 있다. 이는 첫 서두에서 설명한 **후자**에만 방점이 있다. 그럼 첫 번째 이슈인 `타입 지원에 따른 안정성 확보` 는 필수가 아닌 선택적 요소로 작성되고 있는 것임이 인지된다.

아니라면 덕타이핑 언어는 나올 수 자체가 없으므로...

나는 이 상황을 두 가지로 해석했다.

- 아직도 자바스크립트 사용자 풀이 압도적으로 크다.
- 안정성에 대한 확보의 필수 조건은 테스트지 타입이 아니다.



### 자바스크립트 개발자와 타입스크립트 개발자의 풀

만약 2016년에 `next.js` 가 혹은 그 보다 더 오래된 시점에 `react` 가 타입스크립트로 작성되었다면 지금 처럼 전성기 구가는 커녕 완성도와 인지도를 가질 수 있었을까?

> 개발자의 풀은 곧 커뮤니티의 크기를 의미한다. 커뮤니티의 크기는 참여도와 관심으로 해석될 수 있고 관심은 곧 그 자체로 셀프 마케팅적인 효과가 있다.

언어적으로 더 우월하다고 한들 프리미티브 로써 자바스크립트가 가지는 장점무시할 수 있다. 다시 한번 얘기하지만 자바스크립트는 필수고 타입스크립트는 옵션이다.

**이건 자바스크립트의 개발자 풀이기에 가능했던 결과로 생각된다.** 타입스크립트 엔지니어는 구하는 일 자체가 쉽지 않다. 사용 경험이 아니라 그 이상으로써 팀에 도입 내지는 많은 경우의 트러블 슈팅을 해낼 수 있는 엔지니어는 더더욱 그러하다.

반면 사용 경험만을 가지고 있던, 타입스크립트로 프로젝트 완성 까지의 경험이 있던, 혹은 더 나아가 회사에 타입스크립트를 도입하고 확장시킬 정도의 열정과 경험을 모두가진 사람이건 모두 자바스크립트 개발자라는게 엄연한 사실이다.

언어적으로도 타입스크립트는 자바스크립트의 수퍼셋을 추구한다. 개발자 풀도 마찬가지다. 타입스크립트를 다루는 개발자 중 자바스크립트를 못다루는 개발자는 없을꺼다.(ES5, ES3 얘기는 접어두자)

나도 현재 가지고 있는 기술적 스택을 가지고 창업을 고민했는데 아이러니하게도 생산성(안정성 향상에 의한) 확보를 위한 이런 저런 최신 기술 스택을 가지고 있음에도 불구하고 역설적이게도 인력 수급 문제를 해결하지 못한다는 결론에 도달했다. 특히 초반에 이런점이 더 뼈아픈데 아무래도 희소성 때문이라도 연봉이 더 올라가 수 밖에 없겠구나 생각되었다.(창업 대신 취업시 🐶이득 인건가)

아마도 자바 기반의 생태계가 공고한 것도 이런 이유가 없지 않으리라. **자바에 대한 폄훼가 아니며 난 자바를 잘 모른다.**



### 안정성에 대한 확보의 필수 조건은 테스트지 타입이 아니다.

> 테스트가 있기에 덕 타이핑 언어와 상관없이 코드를 신뢰하고 라이브러리를 사용하고 발전 시킬 수 있다.

타입은 컴파일 타임에 에러를 걸러주는 매우 중요한 역할을 하며 IDE의 지원으로 코딩 타임에 좀 더 확실을 갖고 코딩을 할 수 있게한다.

그러나 모든 타이핑을 다 할 수는 없는 상황이 존재하며 결국 런타임에는 자바스크립트가 돌게되므로 동적으로 들어오는 입력값을 제약할 수 없다.

결국 테스트만이 이 문제를 해결할 수 있으며 시간이 지날 수록 더 더욱 쌓여가는 테스트 코드들에 의해서만이 견고함을 유지할 수 있다.

개인적으로 오픈소스를 공개하려 할 때 가장 귀찮은 일은 테스트 코드 작성이 가능한 환경을 만들고 이를 프로세스화 하기위해 CI 를 연결하는 일이었다. 그 이후 부터는 핏쳐를 정의하고 테스트 케이스를 작성하고 이슈 발행, 리뷰 순으로 이어가면 된다. 물론 영어는 제외하고 말하면 그렇다. 때문에 UI를 포함한 프로젝트는 테스트 환경 구축이 더 힘드므로 더 힘들다. 🍈



## 타입스크립트는 어플리케이션 규모의 제어에서 빛을 발한다.

라이브러리는 함수의 집합 느낌이다. 반면 회사에서 직면하는 과제는 오픈소스를 운영하는 팀 내지는 공용 라이브러리 팀을 따로 갖는 수준의 규모가 아니라면 어플리케이션 또는 웹사이트를 다루게 된다.

웹사이트는 좀 애매한 면이 있지만 같은 **SPA** 라는 관점에서, 어플리케이션은 데이터를 흘리기 시작하는데 여기서는 타입스크립트가 꽤나 많은 도움을 준다. 변경이 잦은 프론트엔드에서 테스트 코드를 함께 유지 보수하는 일은 그리 쉬운일이 아닐거다. 타입은 이런 상황에서 테스트케이스에 대한 구멍에 대한 다소 완충제 역할을 해준다.

### 타입 정와 개발자는 상생 관계다.

안정성과는 별개로 사람들은 아는 것에 대해 불평하고 제안을 할 수 있는데 프론트엔드는 그런 면에서 모두에게 열려있고 누구나 그런 자신의 의견에 대해 빠른 반응을 기대한다.

타입스크립트 이런 다양한 요구사항에 대해 더 빠른 대처가 가능하게 한다. 타입 정의를 위해 시간을 쏟아내면 프로젝트가 후반으로 깔때 생기는, 정책적인 면이나 디자인 적인 면 또는 API의 응답 값 변경에 따른 상황이 왔을 때 훨씬 더 자신을 가지고 코드를 짤 수 있다.

### 타입스크립트는 대규로 리팩토링에 강하다.

아마도 자바스크립트에서는 가능할지 생각조차 안해봤다. 2012년이던가? 영국향 프리삿 프로젝트를 할 때 규모로 인해 , 또 자바스크립트의 자유로움 때문에 처음으로 타입스크립트를 도입하면서 모든 확장자를 `ts` 로 바꾸고 리팩토링을 시작했다. 타입스크립트가 자바스크립트의 수퍼셋이기 때문에 가능한 방법인데 이를 통해서 타입스크립트 에러를 모두 내고 그걸 잡는 방식으로 진행하게 된다.

특정 함수를 다른 모듈로 옮긴다거나할때 이를 옮기게되면 이와 관련된 에러를 모두 보여주므로 이를 추적하면서 두더지 잡기가 가능해진다.



## 그리고 아직도 화나게 하는 점이 많다.

타입스크립트 기반의 모노레포를 구성한다거나, babel7이 나오면서 네임스페이스는 지원안한다고 하거나,, 브레이킹 체인지가 발생하거나, 혹시 라이브러리와의 타입 에러가 난다거나 했을 때 정말로 지친다. 매우 많은 시간을 투자해야하고 결국엔 실패할 수도 있다. 이러면 짧게는 몇시간에 몇 주, 혹은 몇 달 단위로 계속 시도 실패하면서 시간을 소모하고 있는 자신을 발견하기도 한다.

이런 점들은 아직도 유효한 점들이 꽤나 있으므로 조만간 글을 풀어보도록 하겠다.



## 그럼에도 불구하고 내가 타입스크립트만 쓰는 이유

그러나 계속적으로 타입스크립트는 개선되고 있다. 기능 적인 측면 뿐만이 아니라도 처음에는 컴파일 속도가 매우 느렸고 무한 루프 상태에 빠지는 경우도 있었던 것으로 기억한다. 생태계 또한 빠른 속도로 성장하고 있다.

개인적으로 익숙한 점도 한목을 하고, 하다 못해 작은 라이브러리만을 만들어도 타입이 코드와 싱크된 상태로 전달되는 점(사용자 측에서도 타입스크립트를 사용한다면)등은 꽤나 장점이다. 바벨 vs 타입스크립트 구도 있어서 어차피 둘중 하나는 써야한다면 타입스크립트가  주는 이점이 더 많으므로, (난 왜 바벨과 타입스크립트를 같이 쓰고 있지? 잊어버렸다 😷)

상황에 따라 다른 언어를 선택하는 것 또한 버든이다.
