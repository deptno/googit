---
title: 타입스크립트가 나를 좌절하게 할 때
date: 2019-01-28
description: 타입스크립트에 의해서 발생되는 상황 모든 것이 처음이고 트러블 슈팅이다. 언제 타입스크립트는 나를 괴롭게 했나, 💔
tags:
  - 타입스크립트
  - 타입스크립트단점
  - typescript
  - 함수형
  - functional
---

타입스크립트에 의해서 만나는 상황 모든 것이 에러다. 이 상황을 극복하기 위해 들어가는 시간은 작지 않았다. 그나마 지금은 커뮤니티가 성장하면서 이에 대한 고민들이 많이 해결된 상태이다.

하지만 여전히 번잡한면이 적지 않다. 모든 것의 시작은 웹팩과 바벨이 떠오르던 그 때 인것 같다. 언제 나는 타입스크립트를 포기하고 싶었나.



## 개발 환경 구성

### 💔 프론트엔드 빌드 환경 구성

`next.js` 도 버전 5에 와서야 타입스크립트 지원이 이루어졌다. 기억하기로는 웹팩과 바벨로 부터의 지원에 따른 지원이었다. 

따로 컴파일 환경을 돌려서 `.js` 파일로 컴파하는 과정과 `next.js` 가 동작하는 과정 두 부분으로 환경을 따로 구동하여 프로젝트를 구동했다. 물론 CPU등에 더 부담을 준다.

`next@5` 에 와서는 타입스크립트를 직접 불러들여 컴파일 없이 개발 환경을 구성할 수 있게 되었다.

`next@7` 에 와서 `babel@7` 는 타입스크립트 컴파일 대신 타입스크립트 관련 문법을 삭제(strip) 하는 방식으로 속도를 끌어 올렸지만 `namespace` 미지원 문제가 남아있다.

### 💔 테스트 환경 구성

매번 추가적인 복사가 필요하며 `jest` 의 경우 모킹시에 `.js` 를 읽어들이는데 매번 `.ts` 도 되는지 시도해야하는 것 자체가 부담이다.



## 라이브러리

함수형 라이브러리는 테스트가 환경에서 검증되어 올라왔음에도 불구하고 **lazy** 하게 쓰이는 특성에 의해서 타입스크립트의 타입 추론이 망가지는 경우가 있다. 또한 바벨등 필수적으로 사용하는 패키지들과도 충돌이 있다.

### 💔 GraphQL codegen

`codegen` 은 GraphQL, 타입스크립트의 타입 정의를 중복으로 해야하는 불편함을 덜어준다. 하지만 아직 `codegen` 은 `namepsace` 방식을 사용하고 있으며 `babel` 과 함께 사용시 트러블을 일으킨다. 때문에 엄청나게 기대했던 풀스택 코딩은 용두사미느낌이 강했다. ㅠ

### 💔 `ramda.js`

타입스크립트와 함수형 라이브러리, 그 중에서도 내가 사용한 `ramda` 는 타입스크립트로 인해 오히려 타입에러를 동반하여 사용을 껄끄럽게한다. 결국 타입을 포기하거나 제거 하는 방향으로 흐르게된다.



## 모노레포

 `.ts` 가 아닌 `.js` 를 인식하므로 이에 대해 항시 따로 컴파일을 돌려줘야해서 생산성이 저하된다. 혹은 와쳐를 돌려놔도 팬소리가 시끄럽고 부담스럽다. 자바스크립트의 장점이 완전히 죽어버리는 경험이다.